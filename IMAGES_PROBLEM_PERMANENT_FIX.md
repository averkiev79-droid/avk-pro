# üî• –ü–û–°–¢–û–Ø–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø–ú–ò

## –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è/deploy –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `REACT_APP_BACKEND_URL` –≤ —Ñ–∞–π–ª–µ `/app/frontend/.env` **—Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è** –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:

```
‚ùå https://avk-shop.preview.emergentagent.com
```

–í–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ:

```
‚úÖ https://avk-pro.ru
```

–ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –Ω–∞ production —Å–∞–π—Ç–µ.

---

## ‚ö° –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (–∫–æ–≥–¥–∞ —Ñ–æ—Ç–æ –ø—Ä–æ–ø–∞–ª–∏)

–ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É:

```bash
/app/scripts/fix_frontend_env.sh
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç BACKEND_URL
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç –µ—Å–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç frontend
4. ‚úÖ –ü–æ–∫–∞–∂–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 10 —Å–µ–∫—É–Ω–¥

---

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê (–µ—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω—ã –≤ –ø—Ä–æ–±–ª–µ–º–µ)

```bash
/app/scripts/diagnose_images.sh
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å BACKEND_URL
- ‚úÖ –ù–∞–ª–∏—á–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ù–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –¥–∏—Å–∫–µ
- ‚úÖ –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- ‚úÖ –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

---

## üõ°Ô∏è –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ deploy

**–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ deploy –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ:**

```bash
/app/scripts/fix_frontend_env.sh
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `/app/scripts/monitor_env.sh` –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç URL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

**–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç:**

–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Emergent –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –∑–∞–¥–∞—á–∏ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ deployment pipeline.

---

## üìã CHECKLIST –ü–û–°–õ–ï DEPLOY

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ deployment:

- [ ] 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å `/app/scripts/fix_frontend_env.sh`
- [ ] 2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 30 —Å–µ–∫—É–Ω–¥
- [ ] 3. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+Delete)
- [ ] 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ
- [ ] 5. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ - –∑–∞–ø—É—Å—Ç–∏—Ç—å `/app/scripts/diagnose_images.sh`

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

–ü—Ä–∏ deployment –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ Emergent **–ø–µ—Ä–µ—Å–æ–∑–¥–∞—ë—Ç** —Ñ–∞–π–ª `.env` —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç preview URL –≤–º–µ—Å—Ç–æ production URL.

### –ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ?

–ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (Kubernetes ConfigMap –∏–ª–∏ Secrets), —á—Ç–æ–±—ã `REACT_APP_BACKEND_URL` –≤—Å–µ–≥–¥–∞ –±—ã–ª `https://avk-pro.ru` –≤ production —Å—Ä–µ–¥–µ.

### –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—Ç–µ–∫—É—â–µ–µ)

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ deploy –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è URL.

### –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ)

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ Kubernetes
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ConfigMap –¥–ª—è production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD pipeline –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–º–µ–Ω—ã URL

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–´

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–ª–∞—Å—å:** 4+

**–í—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** 10-30 —Å–µ–∫—É–Ω–¥

**–ü—Ä–∏—á–∏–Ω–∞:** –°–±—Ä–æ—Å .env —Ñ–∞–π–ª–∞ –ø—Ä–∏ deploy

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å–∫ fix_frontend_env.sh

---

## üéØ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–π (—Å–µ–π—á–∞—Å)
1. ‚úÖ –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ deploy –∑–∞–ø—É—Å–∫–∞—Ç—å `fix_frontend_env.sh`
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤ —á–µ–∫-–ª–∏—Å—Ç deployment –ø—Ä–æ—Ü–µ—Å—Å–∞

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–π (1-2 –Ω–µ–¥–µ–ª–∏)
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (systemd timer –∏–ª–∏ similar)
2. –î–æ–±–∞–≤–∏—Ç—å pre-deployment hook –≤ CI/CD

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π (1 –º–µ—Å—è—Ü)
1. –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Emergent –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (Kubernetes ConfigMap)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞–∑–Ω—ã–µ .env –¥–ª—è preview –∏ production

---

## üìû –ö–û–ù–¢–ê–ö–¢–´ –ü–û–î–î–ï–†–ñ–ö–ò

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç–æ–º:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É: `/app/scripts/diagnose_images.sh`
2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—ã–≤–æ–¥
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É Emergent —Å –≤—ã–≤–æ–¥–æ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## üöÄ –ë–´–°–¢–†–´–ï –ö–û–ú–ê–ù–î–´

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ URL
cat /app/frontend/.env | grep REACT_APP_BACKEND_URL

# –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
/app/scripts/fix_frontend_env.sh

# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
/app/scripts/diagnose_images.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
sudo supervisorctl status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ frontend
tail -50 /var/log/supervisor/frontend.out.log
```

---

## ‚úÖ –ò–¢–û–ì–û

**–ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–ø–∞–ª–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `/app/scripts/fix_frontend_env.sh`
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à –±—Ä–∞—É–∑–µ—Ä–∞
4. –ì–æ—Ç–æ–≤–æ! ‚ú®

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 16.11.2025*
*–ü—Ä–æ–±–ª–µ–º–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞*
