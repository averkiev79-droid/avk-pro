"""
Script to seed legal pages with standard templates
Run: python seed_legal_pages.py
"""
import asyncio
from motor.motor_asyncio import AsyncIOMotorClient
import os
from dotenv import load_dotenv
from datetime import datetime, timezone
import uuid

load_dotenv()

async def seed_legal_pages():
    """Seed legal pages with standard Russian templates"""
    mongo_url = os.environ.get('MONGO_URL', 'mongodb://localhost:27017')
    db_name = os.environ.get('DB_NAME', 'test_database')
    client = AsyncIOMotorClient(mongo_url)
    db = client[db_name]
    
    print("=" * 60)
    print(f"Seeding Legal Pages in database: {db_name}")
    print("=" * 60)
    print()
    
    legal_pages = [
        {
            "id": str(uuid.uuid4()),
            "slug": "privacy",
            "title": "Политика конфиденциальности",
            "content": """# Политика конфиденциальности

**Дата вступления в силу:** 16.11.2025

## 1. Общие положения

Настоящая Политика конфиденциальности определяет порядок обработки и защиты персональных данных пользователей сайта **avk-pro.ru** (далее - Сайт), принадлежащего компании **A.V.K. SPORT** (далее - Компания).

Используя Сайт, вы соглашаетесь с условиями настоящей Политики конфиденциальности.

## 2. Какие данные мы собираем

При использовании Сайта мы можем собирать следующие категории персональных данных:

### 2.1. Данные, которые вы предоставляете:
- Имя и фамилия
- Номер телефона
- Адрес электронной почты
- Адрес доставки
- Название команды или организации
- Комментарии к заказу

### 2.2. Данные, собираемые автоматически:
- IP-адрес
- Тип браузера и операционной системы
- Страницы, которые вы посещаете на Сайте
- Время и дата посещения
- Cookie-файлы

## 3. Цели обработки персональных данных

Мы используем ваши персональные данные для следующих целей:

- Обработка и выполнение заказов
- Связь с вами по вопросам заказа
- Отправка информации о статусе заказа
- Улучшение работы Сайта
- Анализ использования Сайта
- Предоставление технической поддержки
- Соблюдение законодательных требований

## 4. Правовые основания обработки данных

Обработка персональных данных осуществляется на основании:

- Вашего согласия
- Исполнения договора
- Законных интересов Компании
- Требований законодательства РФ

## 5. Передача данных третьим лицам

Мы не передаем ваши персональные данные третьим лицам, за исключением следующих случаев:

- С вашего согласия
- Для выполнения заказа (службы доставки)
- По требованию уполномоченных органов государственной власти
- Нашим подрядчикам и партнерам, которые помогают нам в работе Сайта (при условии соблюдения ими конфиденциальности)

## 6. Хранение персональных данных

Мы храним ваши персональные данные не дольше, чем это необходимо для целей, указанных в настоящей Политике, или в течение срока, установленного законодательством РФ.

## 7. Защита персональных данных

Мы применяем технические и организационные меры для защиты ваших персональных данных от несанкционированного доступа, изменения, раскрытия или уничтожения:

- Шифрование передачи данных (HTTPS)
- Ограничение доступа к персональным данным
- Регулярное резервное копирование
- Использование современных систем безопасности

## 8. Ваши права

Вы имеете право:

- Получать информацию об обработке ваших персональных данных
- Требовать исправления неточных данных
- Требовать удаления ваших данных
- Отозвать согласие на обработку данных
- Обжаловать действия Компании в надзорных органах

## 9. Использование cookie-файлов

Мы используем cookie-файлы для улучшения работы Сайта. Подробнее см. [Информация о cookies](/legal/cookies).

## 10. Изменения в Политике

Мы оставляем за собой право вносить изменения в настоящую Политику. Актуальная версия всегда доступна на Сайте.

## 11. Контактная информация

По вопросам, связанным с обработкой персональных данных, обращайтесь:

**Email:** info@avk-sport.ru  
**Телефон:** +7 (812) 317-73-19

---

*Последнее обновление: 16.11.2025*
""",
            "created_at": datetime.now(timezone.utc).isoformat(),
            "updated_at": datetime.now(timezone.utc).isoformat()
        },
        {
            "id": str(uuid.uuid4()),
            "slug": "terms",
            "title": "Пользовательское соглашение",
            "content": """# Пользовательское соглашение

**Дата вступления в силу:** 16.11.2025

## 1. Общие положения

Настоящее Пользовательское соглашение (далее - Соглашение) регулирует отношения между компанией **A.V.K. SPORT** (далее - Компания) и пользователями сайта **avk-pro.ru** (далее - Сайт, Пользователь).

Использование Сайта означает безоговорочное согласие Пользователя с настоящим Соглашением и указанными в нем условиями.

## 2. Предмет Соглашения

2.1. Компания предоставляет Пользователю доступ к Сайту для ознакомления с информацией о продукции и услугах, а также для размещения заказов на производство хоккейной экипировки.

2.2. Услуги, предоставляемые через Сайт:
- Просмотр каталога продукции
- Расчет стоимости заказа
- Оформление заказа на производство
- Получение консультаций

## 3. Регистрация и учетная запись

3.1. Для оформления заказа не требуется регистрация на Сайте.

3.2. При оформлении заказа Пользователь предоставляет достоверную информацию:
- Контактное лицо
- Телефон
- Email
- Адрес доставки (при необходимости)

3.3. Пользователь несет ответственность за достоверность предоставленных данных.

## 4. Условия оформления заказа

4.1. Заказ считается оформленным после заполнения формы на Сайте и получения подтверждения от Компании.

4.2. Минимальный объем заказа:
- Хоккейная форма: от 10 комплектов

4.3. Стоимость заказа:
- Рассчитывается индивидуально
- Зависит от объема, сложности дизайна и выбранных материалов
- Финальная стоимость согласовывается с менеджером

4.4. Сроки изготовления:
- Согласовываются индивидуально при подтверждении заказа

## 5. Оплата

5.1. Оплата производится по безналичному расчету после согласования всех деталей заказа.

5.2. Реквизиты для оплаты предоставляются менеджером Компании.

## 6. Доставка

6.1. Доставка осуществляется по всей России.

6.2. Стоимость и сроки доставки согласовываются отдельно.

6.3. Компания использует услуги надежных транспортных компаний.

## 7. Возврат и обмен

7.1. Возврат и обмен возможны в случае:
- Производственного брака
- Несоответствия заказанным параметрам

7.2. Возврат осуществляется в течение 14 дней с момента получения.

7.3. Претензии принимаются в письменном виде с фото/видео доказательствами.

## 8. Интеллектуальная собственность

8.1. Все материалы Сайта (тексты, изображения, логотипы) являются собственностью Компании и защищены законодательством РФ об авторском праве.

8.2. Использование материалов Сайта возможно только с письменного разрешения Компании.

## 9. Ответственность

9.1. Компания не несет ответственности за:
- Неправильно указанные Пользователем данные
- Задержки доставки по вине транспортных компаний
- Форс-мажорные обстоятельства

9.2. Пользователь несет ответственность за:
- Достоверность предоставленной информации
- Своевременную оплату заказа

## 10. Конфиденциальность

Обработка персональных данных осуществляется в соответствии с [Политикой конфиденциальности](/legal/privacy).

## 11. Изменения Соглашения

11.1. Компания оставляет за собой право вносить изменения в Соглашение.

11.2. Актуальная версия Соглашения всегда доступна на Сайте.

11.3. Продолжение использования Сайта после внесения изменений означает согласие с новой версией Соглашения.

## 12. Разрешение споров

12.1. Все споры решаются путем переговоров.

12.2. При невозможности достижения согласия спор передается в суд по месту нахождения Компании.

12.3. К настоящему Соглашению применяется законодательство РФ.

## 13. Контактная информация

**A.V.K. SPORT**

**Адрес:** г. Санкт-Петербург  
**Телефон:** +7 (812) 317-73-19  
**Email:** info@avk-sport.ru  
**Сайт:** avk-pro.ru

---

*Последнее обновление: 16.11.2025*
""",
            "created_at": datetime.now(timezone.utc).isoformat(),
            "updated_at": datetime.now(timezone.utc).isoformat()
        },
        {
            "id": str(uuid.uuid4()),
            "slug": "cookies",
            "title": "Использование cookie",
            "content": """# Политика использования cookie-файлов

**Дата вступления в силу:** 16.11.2025

## 1. Что такое cookie

Cookie (куки) - это небольшие текстовые файлы, которые сохраняются на вашем устройстве (компьютере, смартфоне, планшете) при посещении веб-сайтов.

## 2. Для чего мы используем cookie

Мы используем cookie-файлы для следующих целей:

### 2.1. Необходимые cookie
Обеспечивают базовую функциональность Сайта:
- Запоминание товаров в корзине
- Сохранение настроек сайта
- Обеспечение безопасности

### 2.2. Аналитические cookie
Помогают понять, как посетители используют Сайт:
- Количество посещений
- Наиболее популярные страницы
- Источники трафика
- Время нахождения на Сайте

### 2.3. Функциональные cookie
Улучшают работу Сайта:
- Запоминание языка и региона
- Сохранение пользовательских предпочтений
- Улучшение пользовательского опыта

## 3. Какие cookie мы используем

### Сессионные cookie
Временные файлы, которые удаляются после закрытия браузера.

**Назначение:**
- Управление корзиной покупок
- Навигация по сайту
- Форма заказа

### Постоянные cookie
Остаются на устройстве в течение определенного времени.

**Срок хранения:** до 1 года

**Назначение:**
- Сохранение настроек
- Аналитика посещений
- Улучшение работы сайта

## 4. Cookie третьих сторон

Мы можем использовать сервисы третьих сторон, которые также могут устанавливать свои cookie:

### Google Analytics
**Назначение:** Анализ посещаемости сайта  
**Политика:** https://policies.google.com/privacy

### Яндекс.Метрика
**Назначение:** Веб-аналитика  
**Политика:** https://yandex.ru/legal/confidential/

## 5. Управление cookie

### 5.1. Настройка браузера

Вы можете управлять cookie через настройки вашего браузера:

**Google Chrome:**
1. Настройки → Конфиденциальность и безопасность → Файлы cookie
2. Выберите нужные параметры

**Mozilla Firefox:**
1. Настройки → Приватность и защита → Куки и данные сайтов
2. Управление настройками

**Safari:**
1. Настройки → Конфиденциальность
2. Управление cookie

**Microsoft Edge:**
1. Настройки → Файлы cookie и разрешения сайтов
2. Управление файлами cookie

### 5.2. Отключение cookie

Вы можете полностью отключить cookie в настройках браузера, но это может повлиять на функциональность Сайта:

❌ Корзина не будет работать  
❌ Настройки не будут сохраняться  
❌ Некоторые функции могут быть недоступны

## 6. Принятие cookie

При первом посещении Сайта вы увидите уведомление о использовании cookie. Продолжая использовать Сайт, вы соглашаетесь с использованием cookie в соответствии с настоящей Политикой.

## 7. Обновление Политики

Мы можем обновлять настоящую Политику. Актуальная версия всегда доступна на Сайте.

При внесении существенных изменений мы уведомим вас через Сайт.

## 8. Дополнительная информация

Подробнее об обработке персональных данных см. [Политику конфиденциальности](/legal/privacy).

## 9. Контакты

По вопросам использования cookie обращайтесь:

**Email:** info@avk-sport.ru  
**Телефон:** +7 (812) 317-73-19

---

*Последнее обновление: 16.11.2025*
""",
            "created_at": datetime.now(timezone.utc).isoformat(),
            "updated_at": datetime.now(timezone.utc).isoformat()
        },
        {
            "id": str(uuid.uuid4()),
            "slug": "requisites",
            "title": "Реквизиты компании",
            "content": """# Реквизиты компании

## A.V.K. SPORT

### Основная информация

**Полное наименование:** [Будет заполнено]

**Краткое наименование:** A.V.K. SPORT

**ИНН:** [Будет заполнено]

**КПП:** [Будет заполнено]

**ОГРН:** [Будет заполнено]

### Юридический адрес

[Будет заполнено]

### Фактический адрес

г. Санкт-Петербург

### Банковские реквизиты

**Наименование банка:** [Будет заполнено]

**БИК:** [Будет заполнено]

**Корр. счет:** [Будет заполнено]

**Расч. счет:** [Будет заполнено]

### Контактная информация

**Телефон:** +7 (812) 317-73-19

**Email:** info@avk-sport.ru

**Сайт:** avk-pro.ru

### Руководство

**Генеральный директор:** [Будет заполнено]

---

*Для получения актуальных реквизитов свяжитесь с нами по телефону или email.*

*Дата обновления: 16.11.2025*
""",
            "created_at": datetime.now(timezone.utc).isoformat(),
            "updated_at": datetime.now(timezone.utc).isoformat()
        }
    ]
    
    created_count = 0
    updated_count = 0
    
    for page in legal_pages:
        # Check if page already exists
        existing = await db.legal_pages.find_one({"slug": page["slug"]})
        
        if existing:
            # Update existing page
            await db.legal_pages.update_one(
                {"slug": page["slug"]},
                {"$set": {
                    "title": page["title"],
                    "content": page["content"],
                    "updated_at": page["updated_at"]
                }}
            )
            updated_count += 1
            print(f"✓ Updated: {page['title']}")
        else:
            # Create new page
            await db.legal_pages.insert_one(page)
            created_count += 1
            print(f"✓ Created: {page['title']}")
    
    print()
    print("=" * 60)
    print(f"✓ Created: {created_count} pages")
    print(f"✓ Updated: {updated_count} pages")
    print("=" * 60)
    
    client.close()

if __name__ == "__main__":
    asyncio.run(seed_legal_pages())
